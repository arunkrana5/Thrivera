@model Dealer.Add
@section style{


}
<div class="table-section">
    <div class="page-header">
        <div class="page-leftheader px-2 my-2">
            <h4 class="page-title pt-4">Dealer Master</h4>
        </div>

    </div>
    @using (Ajax.BeginForm("DealerAdd", "Masters",
            new { src = ViewBag.src },
             new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnSuccess", OnBegin = "ShowLoadingDialog()" },
                new { @id = "DealerAddForm", @enctype = "multipart/form-data" })
        )
    {
        <div class="row p-2">
            <div class="col-lg-12 ">
                <div class="card">
                    <div class="card-body">

                        <div class="row ">

                            <div class="col-lg-3 form-group">
                                <label>  Dealer Code <sup>*</sup>  </label>
                                @Html.TextBoxFor(model => model.DealerCode, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.DealerCode, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-3 form-group">
                                <label> Dealer Name  <sup>*</sup> </label>
                                @Html.TextBoxFor(model => model.DealerName, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.DealerName, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-lg-3 form-group">
                                <label> Dealer Type <sup>*</sup> </label>
                                @Html.DropDownListFor(n => n.DealerTypeID, new SelectList(Model.DealerTypeList, "ID", "Name", Model.DealerCategoryID), "Select",
                                 new { @class = "form-control mb-0  applyselect" })
                                @Html.ValidationMessageFor(model => model.DealerTypeID, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-lg-3 form-group">
                                <label> Dealer Category <sup>*</sup> </label>
                                @Html.DropDownListFor(n => n.DealerCategoryID, new SelectList(Model.DealerCategoryList, "ID", "Name", Model.DealerCategoryID), "Select",
                                 new { @class = "form-control mb-0  applyselect" })
                                @Html.ValidationMessageFor(model => model.DealerCategoryID, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-3 form-group">
                                <label> Region  <sup>*</sup>  </label>
                                <input type="hidden" id="hdnRegionID" value="@Model.RegionID" />
                                @Html.DropDownListFor(n => n.RegionID, new SelectList(Model.RegionList, "ID", "Name", Model.RegionID), "Select",
                                new { @class = "form-control  applyselect", @onchange = "FillState()" })
                                @Html.ValidationMessageFor(model => model.RegionID, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-lg-3 form-group">
                                <label> State  <sup>*</sup> </label>
                                <input type="hidden" id="hdnStateID" value="@Model.StateID" />
                                @Html.DropDownListFor(n => n.StateID, new SelectList(Model.StateList, "ID", "Name", Model.StateID), "Select",
                         new { @class = "form-control mb-0  applyselect", @onchange = "FillCity()" })
                                @Html.ValidationMessageFor(model => model.StateID, "", new { @class = "text-danger" })
                            </div>


                            <div class="col-lg-3 form-group">
                                <label> Branch  <sup>*</sup> </label>
                                <input type="hidden" id="hdnBranchID" value="@Model.BranchID" />
                                @Html.DropDownListFor(n => n.BranchID, new SelectList(Model.BranchList, "ID", "Name", Model.BranchID), "Select",
                    new { @class = "form-control mb-0  applyselect" })
                                @Html.ValidationMessageFor(model => model.BranchID, "", new { @class = "text-danger" })
                            </div>


                            <div class="col-lg-3 form-group">
                                <label>  City <sup>*</sup>  </label>
                                <input type="hidden" id="hdnCityID" value="@Model.CityID" />
                                @Html.DropDownListFor(n => n.CityID, new SelectList(Model.CityList, "ID", "Name", Model.CityID), "Select",
                new { @class = "form-control mb-0  applyselect", @onchange = "FillArea()" })
                                @Html.ValidationMessageFor(model => model.CityID, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-3 form-group">
                                <label>   Area <sup>*</sup>  </label>
                                <input type="hidden" id="hdnAreaID" value="@Model.AreaID" />
                                @Html.DropDownListFor(n => n.AreaID, new SelectList(Model.AreaList, "ID", "Name", Model.AreaID), "Select",
            new { @class = "form-control mb-0  applyselect" })
                                @Html.ValidationMessageFor(model => model.AreaID, "", new { @class = "text-danger" })

                            </div>

                            <div class="col-lg-3 form-group">
                                <label>  Pincode <sup>*</sup> </label>
                                @Html.TextBoxFor(model => model.PinCode, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.PinCode, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-6 form-group">
                                <label> Address <sup>*</sup>   </label>
                                @Html.TextAreaFor(model => model.Address, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-3 form-group">
                                <label>  Email  </label>
                                @Html.TextBoxFor(model => model.EmailID, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.EmailID, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-lg-3 form-group">
                                <label>    Phone </label>
                                @Html.TextBoxFor(model => model.Phone, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.Phone, "", new { @class = "text-danger" })
                            </div>




                            <div class="col-lg-3 form-group">
                                <label>
                                    Latitude   <sup>*</sup>
                                </label>
                                @Html.TextBoxFor(model => model.Latitude, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.Latitude, "", new { @class = "text-danger" })
                            </div>
                            <div class="col-lg-3 form-group">
                                <label>
                                    Longitude <sup>*</sup>
                                </label>
                                @Html.TextBoxFor(model => model.Longitude, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.Longitude, "", new { @class = "text-danger" })
                            </div>


                            <div class="col-lg-3 form-group">
                                <label>
                                    Billing Code    <sup>*</sup>
                                </label>
                                @Html.TextBoxFor(model => model.BillingCode, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.BillingCode, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-3 form-group">
                                <label>
                                    Billing Name <sup>*</sup>
                                </label>
                                @Html.TextBoxFor(model => model.BillingName, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.BillingName, "", new { @class = "text-danger" })
                            </div>

                            <div class="col-lg-12">

                                <div>

                                    <button name="Command" value="Add" class="btn btnupdate pull-right" type="submit">Save changes</button>
                                    <a href="@Url.Action("DealerList",new { src = ClsCommon.Encrypt(ViewBag.MenuID+"*"+"/Masters/DealerList") })" type="button" class="btn  btndefault pull-right">Cancel</a>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    }
</div>
@section scripts    {
    @System.Web.Optimization.Scripts.Render("~/bundle/unobtrusivejs")
    <script>
    
        function FillState() {
            var ID = $("#RegionID").find("option:selected").val();
            if (ID != '') {
                var data = GetDropDownList(ID, "State");
                if (data != '') {
                    $("#StateID").empty();
                    $("#StateID").append($("<option />").val("").text("Select"));

                    //$("#BranchID").empty();
                    //$("#BranchID").append($("<option />").val("").text("Select"));

                    $("#CityID").empty();
                    $("#CityID").append($("<option />").val("").text("Select"));

                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));

                    $(data).each(function () {
                        $("#StateID").append($("<option />").val(this.ID).text(this.Name));
                        $("#StateID").select2();

                    });
                    if ($("#hdnStateID").val() != 0) {
                        $("#StateID").val($("#hdnStateID").val()).change();
                    }
                    CloseLoadingDialog();
                } else {
                    $("#StateID").empty();
                    $("#StateID").append($("<option />").val("").text("Select"));
                    //$("#BranchID").empty();
                    //$("#BranchID").append($("<option />").val("").text("Select"));

                    $("#CityID").empty();
                    $("#CityID").append($("<option />").val("").text("Select"));

                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));
                }
            }
            else {
                $("#StateID").empty();
                $("#StateID").append($("<option />").val("").text("Select"));

                //$("#BranchID").empty();
                //$("#BranchID").append($("<option />").val("").text("Select"));

                $("#CityID").empty();
                $("#CityID").append($("<option />").val("").text("Select"));

                $("#AreaID").empty();
                $("#AreaID").append($("<option />").val("").text("Select"));
            }
        }



        function FillCity() {
            var ID = $("#StateID").find("option:selected").val();
            if (ID != '') {
                var data = GetDropDownList(ID, "City");
                if (data != '') {
                    $("#CityID").empty();
                    $("#CityID").append($("<option />").val("").text("Select"));
                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));
                    $(data).each(function () {
                        $("#CityID").append($("<option />").val(this.ID).text(this.Name));
                        $("#CityID").select2();
                    });
                    if ($("#hdnCityID").val() != 0) {
                        $("#CityID").val($("#hdnCityID").val()).change();
                    }
                    CloseLoadingDialog();
                } else {
                    $("#CityID").empty();
                    $("#CityID").append($("<option />").val("").text("Select"));
                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));
                }
            }
            else {
                $("#CityID").empty();
                $("#CityID").append($("<option />").val("").text("Select"));
                $("#AreaID").empty();
                $("#AreaID").append($("<option />").val("").text("Select"));
            }
          
          


        }



        function FillArea() {
            var ID = $("#CityID").find("option:selected").val();
            if (ID != '') {
                var data = GetDropDownList(ID, "Area");
                if (data != '') {
                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));
                    $(data).each(function () {
                        $("#AreaID").append($("<option />").val(this.ID).text(this.Name));
                        $("#AreaID").select2();

                    });
                    if ($("#hdnAreaID").val() != 0) {
                        $("#AreaID").val($("#hdnAreaID").val()).change();
                    }
                    CloseLoadingDialog();
                } else {
                    $("#AreaID").empty();
                    $("#AreaID").append($("<option />").val("").text("Select"));


                }
            } else {
                $("#AreaID").empty();
                $("#AreaID").append($("<option />").val("").text("Select"));


            }

        }

        //function FillBranch() {
        //    var ID = $("#StateID").find("option:selected").val();
        //    if (ID != '') {
        //        var data = GetDropDownList(ID, "Branch");
        //        if (data != '') {
        //            $("#BranchID").empty();
        //            $("#BranchID").append($("<option />").val("").text("Select"));
        //            $(data).each(function () {
        //                $("#BranchID").append($("<option />").val(this.ID).text(this.Name));
        //                $("#BranchID").select2();

        //            });
        //            if ($("#hdnBranchID").val() != 0) {
        //                $("#BranchID").val($("#hdnBranchID").val()).change();
        //            }
        //            CloseLoadingDialog();
        //        } else {
        //            $("#BranchID").empty();
        //            $("#BranchID").append($("<option />").val("").text("Select"));


        //        }
        //    } else {
        //        $("#BranchID").empty();
        //        $("#BranchID").append($("<option />").val("").text("Select"));


        //    }
        //    FillCity();
        //}


        function OnSuccess(obj) {
            if (obj.Status) {
                SuccessToaster(obj.SuccessMessage);
                window.location.href = obj.RedirectURL;
            }
            else {
                CloseLoadingDialog();
                FailToaster(obj.SuccessMessage);

            }
        }

    </script>
}